{"version":3,"file":"js/658.js","mappings":"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","sources":["webpack:///./resources/js/api/product.js","webpack:///./resources/js/views/products/ProductsEdit.vue","webpack:///./resources/js/views/products/ProductsEdit.vue?e68f"],"sourcesContent":["import req from './https';\n\nexport const apiGetProducts = (data) => req('get', '/products', data);\nexport const apiGetProduct = (id) => req('get', '/products/' + id);\nexport const apiCreateProduct = (data) => req('post', '/products', data);\nexport const apiUpdateProduct = (id, data) => req('post', '/products/' + id, data);\nexport const apiDeleteProduct = (id) => req('delete', '/products/' + id);\n","<template>\n    <transition name=\"fade\">\n        <div v-show=\"isShow\" class=\"w-full h-auto bg-white rounded-sm shadow-md\">\n            <div class=\"p-5\">\n                <div class=\"w-full\">\n                    <label htmlFor=\"name\"\n                           class=\"block mb-2 ml-1 font-bold text-left uppercase text-md text-blueGray-600\">\n                        名稱\n                    </label>\n                    <input v-model=\"product.name\" id=\"name\" type=\"text\" name=\"name\" placeholder=\"名稱\"\n                           class=\"input-style\">\n                </div>\n                <div class=\"mt-4 w-full\">\n                    <label htmlFor=\"thumbnail\"\n                           class=\"block mb-2 ml-1 font-bold text-left uppercase text-md text-blueGray-600\">\n                        縮圖\n                    </label>\n                    <div class=\"flex\">\n                        <input type=\"file\" @change=\"getThumbnail($event)\" id=\"thumbnail\" name=\"thumbnail\"\n                               placeholder=\"縮圖\">\n                        <img v-if=\"thumbnailSrc !== null\" v-bind:src=\"thumbnailSrc\" alt=\"縮圖\"\n                             class=\"w-auto h-24\">\n                    </div>\n                </div>\n\n                <div class=\"mt-4 w-full\">\n                    <label htmlFor=\"excerpt\"\n                           class=\"block mb-2 ml-1 font-bold text-left uppercase text-md text-blueGray-600\">\n                        摘要\n                    </label>\n                    <input v-model=\"product.excerpt\" id=\"excerpt\" type=\"text\" name=\"excerpt\" placeholder=\"摘要\"\n                           class=\"input-style\">\n                </div>\n\n                <div class=\"flex justify-end mt-4 w-full\">\n                    <button @click=\"updateProduct\"\n                            class=\"px-6 py-3 mr-1 mb-1 font-medium text-left text-white uppercase rounded shadow transition-all duration-150 ease-linear outline-none text-md bg-blueGray-800 active:bg-blueGray-600 hover:shadow-lg focus:outline-none\">\n                        更新作品\n                    </button>\n                </div>\n            </div>\n        </div>\n    </transition>\n</template>\n\n<script>\nimport {onBeforeMount, ref} from \"vue\";\nimport {useRoute, useRouter} from \"vue-router\";\nimport {useStore} from \"vuex\";\nimport {apiGetProduct, apiUpdateProduct} from \"../../api/product\";\n\nexport default {\n    setup() {\n        const product = ref({\n            name: '',\n            excerpt: '',\n            thumbnail: null\n        });\n        const thumbnailSrc = ref(null);\n\n        const isShow = ref(false);\n        const route = useRoute()\n        const productId = route.params.id;\n        const getData = async () => {\n            await Promise.all([apiGetProduct(productId)])\n                .then((results) => {\n                    product.value = results[0].data;\n                    thumbnailSrc.value = product.value.thumbnail;\n                    product.value.thumbnail = null;\n                    isShow.value = true;\n                });\n        }\n        onBeforeMount(getData);\n\n        const getThumbnail = (event) => {\n            const reader = new FileReader();\n\n            reader.onloadend = function () {\n                thumbnailSrc.value = reader.result;\n            }\n\n            reader.readAsDataURL(event.target.files[0]);\n\n            product.value.thumbnail = event.target.files[0]\n        }\n        const inputData = () => {\n            const data = new FormData();\n\n            Object.keys(product.value).forEach((key) => {\n                data.append(key, product.value[key])\n            });\n\n            return data;\n        }\n\n        const router = useRouter();\n        const store = useStore();\n        const updateProduct = async () => {\n            await Promise.all([apiUpdateProduct(productId, inputData())])\n                .then(() => {\n                    store.dispatch('addNotice', {message: '作品更新成功!', color: true});\n                    router.push({name: 'productsManage'});\n                });\n        };\n\n        return {\n            product,\n            thumbnailSrc,\n            isShow,\n            updateProduct,\n            getThumbnail\n        }\n    }\n}\n</script>\n\n","import { render } from \"./ProductsEdit.vue?vue&type=template&id=5087aacc\"\nimport script from \"./ProductsEdit.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\xampp\\\\htdocs\\\\MoonNightBlog\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["apiGetProducts","data","req","apiGetProduct","id","apiCreateProduct","apiUpdateProduct","apiDeleteProduct","class","htmlFor","setup","product","ref","name","excerpt","thumbnail","thumbnailSrc","isShow","productId","params","getData","Promise","all","then","results","value","onBeforeMount","inputData","FormData","Object","keys","forEach","key","append","router","store","updateProduct","dispatch","message","color","push","getThumbnail","event","reader","FileReader","onloadend","result","readAsDataURL","target","files","type","placeholder","$event","src","alt"],"sourceRoot":""}