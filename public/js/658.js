"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[658],{1392:(e,t,n)=>{n.d(t,{dx:()=>a,Au:()=>l,yk:()=>u,Oe:()=>o,mP:()=>c});var r=n(6779),a=function(e){return(0,r.ZP)("get","/products",e)},l=function(e){return(0,r.ZP)("get","/products/"+e)},u=function(e){return(0,r.ZP)("post","/products",e)},o=function(e,t){return(0,r.ZP)("post","/products/"+e,t)},c=function(e){return(0,r.ZP)("delete","/products/"+e)}},8658:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var r=n(821),a={class:"w-full h-auto bg-white rounded-sm shadow-md"},l={class:"p-5"},u={class:"w-full"},o=(0,r.createElementVNode)("label",{htmlFor:"name",class:"block mb-2 ml-1 font-bold text-left uppercase text-md text-blueGray-600"}," 名稱 ",-1),c={class:"mt-4 w-full"},i=(0,r.createElementVNode)("label",{htmlFor:"thumbnail",class:"block mb-2 ml-1 font-bold text-left uppercase text-md text-blueGray-600"}," 縮圖 ",-1),s={class:"flex"},d=["src"],m={class:"mt-4 w-full"},p=(0,r.createElementVNode)("label",{htmlFor:"excerpt",class:"block mb-2 ml-1 font-bold text-left uppercase text-md text-blueGray-600"}," 摘要 ",-1),f={class:"flex justify-end mt-4 w-full"};var h=n(7757),v=n.n(h),b=n(2119),x=n(8410),w=n(1392);function y(e,t,n,r,a,l,u){try{var o=e[l](u),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,a)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function u(e){y(l,r,a,u,o,"next",e)}function o(e){y(l,r,a,u,o,"throw",e)}u(void 0)}))}}const V={setup:function(){var e=(0,r.ref)({name:"",excerpt:"",thumbnail:null}),t=(0,r.ref)(null),n=(0,r.ref)(!1),a=(0,b.yj)().params.id,l=function(){var r=k(v().mark((function r(){return v().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([(0,w.Au)(a)]).then((function(r){e.value=r[0].data,t.value=e.value.thumbnail,e.value.thumbnail=null,n.value=!0}));case 2:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();(0,r.onBeforeMount)(l);var u=function(){var t=new FormData;return Object.keys(e.value).forEach((function(n){t.append(n,e.value[n])})),t},o=(0,b.tv)(),c=(0,x.oR)(),i=function(){var e=k(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,w.Oe)(a,u())]).then((function(){c.dispatch("addNotice",{message:"作品更新成功!",color:!0}),o.push({name:"productsManage"})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{product:e,thumbnailSrc:t,isShow:n,updateProduct:i,getThumbnail:function(n){var r=new FileReader;r.onloadend=function(){t.value=r.result},r.readAsDataURL(n.target.files[0]),e.value.thumbnail=n.target.files[0]}}}};const E=(0,n(3744).Z)(V,[["render",function(e,t,n,h,v,b){return(0,r.openBlock)(),(0,r.createBlock)(r.Transition,{name:"fade"},{default:(0,r.withCtx)((function(){return[(0,r.withDirectives)((0,r.createElementVNode)("div",a,[(0,r.createElementVNode)("div",l,[(0,r.createElementVNode)("div",u,[o,(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return h.product.name=e}),id:"name",type:"text",name:"name",placeholder:"名稱",class:"input-style"},null,512),[[r.vModelText,h.product.name]])]),(0,r.createElementVNode)("div",c,[i,(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("input",{type:"file",onChange:t[1]||(t[1]=function(e){return h.getThumbnail(e)}),id:"thumbnail",name:"thumbnail",placeholder:"縮圖"},null,32),null!==h.thumbnailSrc?((0,r.openBlock)(),(0,r.createElementBlock)("img",{key:0,src:h.thumbnailSrc,alt:"縮圖",class:"w-auto h-24"},null,8,d)):(0,r.createCommentVNode)("",!0)])]),(0,r.createElementVNode)("div",m,[p,(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return h.product.excerpt=e}),id:"excerpt",type:"text",name:"excerpt",placeholder:"摘要",class:"input-style"},null,512),[[r.vModelText,h.product.excerpt]])]),(0,r.createElementVNode)("div",f,[(0,r.createElementVNode)("button",{onClick:t[3]||(t[3]=function(){return h.updateProduct&&h.updateProduct.apply(h,arguments)}),class:"px-6 py-3 mr-1 mb-1 font-medium text-left text-white uppercase rounded shadow transition-all duration-150 ease-linear outline-none text-md bg-blueGray-800 active:bg-blueGray-600 hover:shadow-lg focus:outline-none"}," 更新作品 ")])])],512),[[r.vShow,h.isShow]])]})),_:1})}]])}}]);
//# sourceMappingURL=658.js.map